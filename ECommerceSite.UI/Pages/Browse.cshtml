@page
@model ProductsModel
@{
    ViewData["Title"] = "Browse";
}
<header id="header">
    <div class="container">
        <div class="row align-items-center justify-content-between d-flex">
            <div id="logo">
                <a href="/"><img src="~/images/logo.png" /></a>
            </div>
            <nav id="nav-menu-container">
                <ul class="nav-menu">
                    <li>
                        <a class="navbar-item" asp-page="/Cart">
                            Cart: <vc:cart view="Small"></vc:cart>
                        </a>
                    </li>
                    <li class="menu-has-children">
                        <a href="">Account</a>
                        @if (User.Identity.IsAuthenticated)
                        {
                            <ul>
                                <li><a asp-page="/admin/index">Go to Admin Panel</a></li>
                                <li><a asp-controller="account" asp-action="logout">Sign Out</a></li>
                            </ul>
                        }
                        else
                        {
                            <ul>
                                <li><a asp-page="/accounts/login">Sign In</a></li>
                            </ul>
                        }
                    </li>
                </ul>
            </nav><!-- #nav-menu-container -->
        </div>
    </div>
</header><!-- #header -->

<div class="container h-100">
    
</div>

<section class="section-gap" style="background: -moz-linear-gradient(0deg, #235ee7 0%, #4ae7fa 100%);
    background: -webkit-linear-gradient(0deg, #235ee7 0%, #4ae7fa 100%);
    background: -ms-linear-gradient(0deg, #235ee7 0%, #4ae7fa 100%);">
    <div class="container">
        <div class="d-flex justify-content-center h-100 p-b-11">
            <form class="searchbar">
                <input asp-for="SearchString" autocomplete="off" class="search_input" type="search" placeholder="Find a Product">
                <button type="submit" value="Search" class="search_icon no-style"><i class="fa fa-search"></i></button>
            </form>
        </div>
        <div class="card-columns">
            @{
                foreach (var p in Model.Products)
                {
                    string message = "";
                    string aClass = "";
                    bool flag = false;

                    if (p.StockCount == 0)
                    {
                        message = "Out of Stock";
                        aClass = "cardDisabled";
                        flag = true;
                    }
                    else if (p.StockCount > 0 && p.StockCount <= 10)
                    {
                        message = "Low on Stock";
                        aClass = "";
                        flag = true;
                    }
                    <a class="card mb-4 @aClass" asp-page="Product" asp-route-name="@p.Name.Replace(" ", "-")">
                        <img src="~/images/shirts.jpg" class="card-img-top img-fluid">
                        <div class="card-body">
                            <h5 class="card-title">@p.Name</h5>
                            <p class="card-text"><small class="text-muted">@p.Value</small></p>
                            <p class="card-text">@p.Description</p>
                        </div>
                        @if (flag)
                        {
                            <div class="card-footer">
                                <small class="text-muted">@message</small>
                            </div>
                        }
                    </a>
                }
            }
        </div>
    </div>
</section>
